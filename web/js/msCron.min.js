/*
 =========================================================
 msCronjs
 https://github.com/onterumahendra/CronScheduler
 Copyright (c) 2016 MSquare Solutions
 =========================================================
 */
/*
 * Contributions:
 *  - Onteru Mahendra (msbrother445@gmail.com)
 *  - Padala Mallikarjuna (mallikarjuna.909@gmail.com)
 */
!function(e){e.fn.msCron=function(a){function n(){var a=[{text:"January",val:"1"},{text:"February",val:"2"},{text:"March",val:"3"},{text:"April",val:"4"},{text:"May",val:"5"},{text:"June",val:"6"},{text:"July",val:"7"},{text:"August",val:"8"},{text:"September",val:"9"},{text:"October",val:"10"},{text:"Novermber",val:"11"},{text:"December",val:"12"}];e(".months").each(function(){t(this,a)})}function t(a,n){for(var t=0;t<n.length;t++)e(a).append("<option value='"+n[t].val+"'>"+n[t].text+"</option>")}function l(){for(var a=0;60>a;a++)24>a&&e(".hours").each(function(){e(this).append(o(a))}),e(".minutes").each(function(){e(this).append(o(a))})}function p(){var a=[{text:"Monday",val:"MON"},{text:"Tuesday",val:"TUE"},{text:"Wednesday",val:"WED"},{text:"Thursday",val:"THU"},{text:"Friday",val:"FRI"},{text:"Saturday",val:"SAT"},{text:"Sunday",val:"SUN"}];e(".week-days").each(function(){t(this,a)})}function i(){var a=[{text:"First",val:"1"},{text:"Second",val:"2"},{text:"Third",val:"3"},{text:"Fourth",val:"4"}];e(".day-order-in-month").each(function(){t(this,a)})}function s(e){return 1==e.toString().length?"0"+e:e}function o(e){return"<option value='"+e+"'>"+s(e)+"</option>"}function r(){var n,n=e("ul#msCronTabs li.active a").prop("id"),t="";switch(n){case"msMinutesTab":t="0 0/"+e("#MinutesInput").val()+" * 1/1 * ? *",n="MINUTES";break;case"msHourlyTab":switch(e("input:radio[name=HourlyRadio]:checked").val()){case"1":t="0 0 0/"+e("#HoursInput").val()+" 1/1 * ? *";break;case"2":t="0 "+Number(e("#AtMinutes").val())+" "+Number(e("#AtHours").val())+" 1/1 * ? *"}n="HOURLY";break;case"msDailyTab":switch(e("input:radio[name=DailyRadio]:checked").val()){case"1":t="0 "+Number(e("#DailyMinutes").val())+" "+Number(e("#DailyHours").val())+" 1/"+e("#DaysInput").val()+" * ? *";break;case"2":t="0 "+Number(e("#DailyMinutes").val())+" "+Number(e("#DailyHours").val())+" ? * MON-FRI *"}n="DAILY";break;case"msWeeklyTab":var l="";e("#Weekly input:checkbox:checked").each(function(){l+=e(this).val()+","}),l.length>0&&(l=l.substr(0,l.length-1)),t="0 "+Number(e("#WeeklyMinutes").val())+" "+Number(e("#WeeklyHours").val())+" ? * "+l+" *",n="WEEKLY";break;case"msMonthlyTab":switch(e("input:radio[name=MonthlyRadio]:checked").val()){case"1":t="0 "+Number(e("#MonthlyMinutes").val())+" "+Number(e("#MonthlyHours").val())+" "+e("#DayOfMOnthInput").val()+" 1/"+e("#MonthInput").val()+" ? *";break;case"2":t="0 "+Number(e("#MonthlyMinutes").val())+" "+Number(e("#MonthlyHours").val())+" ? 1/"+Number(e("#EveryMonthInput").val())+" "+e("#DayInWeekOrder").val()+"#"+e("#WeekDay").val()+" *"}n="MONTHLY";break;case"msYearlyTab":switch(e("input:radio[name=YearlyRadio]:checked").val()){case"1":t="0 "+Number(e("#YearlyMinutes").val())+" "+Number(e("#YearlyHours").val())+" "+e("#YearInput").val()+" "+e("#MonthsOfYear").val()+" ? *";break;case"2":t="0 "+Number(e("#YearlyMinutes").val())+" "+Number(e("#YearlyHours").val())+" ? "+e("#MonthsOfYear2").val()+" "+e("#DayWeekForYear").val()+"#"+e("#DayOrderInYear").val()+" *"}n="YEARLY"}a.getCron=t,a.activeTab=n}function d(a,n){t=n.replace(/ +(?= )/g,"").trim();var t=t.split(" ");if(7===t.length)switch(a){case"MINUTES":e('#msCronTabs a[href="#Minutes"]').tab("show"),n=n.match(/\d+/g),e("#MinutesInput").val(n[2]);break;case"HOURLY":e('#msCronTabs a[href="#Hourly"]').tab("show"),n=n.match(/\d+/g),6===n.length?(e("#HoursInput").val(n[3]),e("input:radio[name=HourlyRadio][value=1]").prop("checked",!0)):(e("#AtMinutes ").val(n[1]),e("#AtHours ").val(n[2]),e("input:radio[name=HourlyRadio][value=2]").prop("checked",!0));break;case"DAILY":e('#msCronTabs a[href="#Daily"]').tab("show"),n=n.match(/\d+/g),5===n.length?(e("#DaysInput").val(n[4]),e("input:radio[name=DailyRadio][value=1]").prop("checked",!0)):e("input:radio[name=DailyRadio][value=2]").prop("checked",!0),e("#DailyHours ").val(n[2]),e("#DailyMinutes ").val(n[1]);break;case"WEEKLY":e('#msCronTabs a[href="#Weekly"]').tab("show");var l=n;n=n.match(/\d+/g),e("#WeeklyMinutes").val(n[1]),e("#WeeklyHours").val(n[2]),e("#Weekly input:checkbox").each(function(){l.indexOf(e(this).val())>=0&&e(this).prop("checked",!0)});break;case"MONTHLY":e('#msCronTabs a[href="#Monthly"]').tab("show"),-1!==n.indexOf("#")?(e("input:radio[name=MonthlyRadio][value=2]").prop("checked",!0),e("#DayInWeekOrder").val(n.substring(n.indexOf("#"),n.indexOf("#")-3)),n=n.match(/\d+/g),e("#WeekDay").val(n[5]),e("#EveryMonthInput").val(n[4])):(n=n.match(/\d+/g),e("#DayOfMOnthInput").val(n[3]),e("#MonthInput").val(n[5]),e("input:radio[name=MonthlyRadio][value=1]").prop("checked",!0)),e("#MonthlyHours").val(n[1]),e("#MonthlyMinutes").val(n[2]);break;case"YEARLY":e('#msCronTabs a[href="#Yearly"]').tab("show"),-1!==n.indexOf("#")?(e("input:radio[name=YearlyRadio][value=2]").prop("checked",!0),e("#DayWeekForYear").val(n.substring(n.indexOf("#"),n.indexOf("#")-3)),n=n.match(/\d+/g),e("#DayOrderInYear").val(n[4]),e("#MonthsOfYear2").val(n[3])):(n=n.match(/\d+/g),e("#MonthsOfYear").val(n[4]),e("#YearInput").val(n[3]),e("input:radio[name=YearlyRadio][value=1]").prop("checked",!0)),e("#YearlyHours").val(n[2]),e("#YearlyMinutes").val(n[1])}else alert("Invalid Cron Expression..!")}"undefined"==typeof a&&(a={getCron:"",setCron:"",activeTab:"MINUTES"});var c=(e.extend({getCron:"",setCron:"",activeTab:""},a),e("<div/>",{id:"CronGenMainDiv",style:"padding:15px;"})),u=e("<ul/>",{"class":"nav nav-tabs",id:"msCronTabs"});e("<li/>",{"class":"active"}).html(e('<a id="msMinutesTab" role="tab" data-toggle="tab" href="#Minutes">Minutes</a>')).appendTo(u),e("<li/>").html(e('<a id="msHourlyTab" role="tab" data-toggle="tab" href="#Hourly">Hourly</a>')).appendTo(u),e("<li/>").html(e('<a id="msDailyTab" role="tab" data-toggle="tab" href="#Daily">Daily</a>')).appendTo(u),e("<li/>").html(e('<a id="msWeeklyTab" role="tab" data-toggle="tab" href="#Weekly">Weekly</a>')).appendTo(u),e("<li/>").html(e('<a id="msMonthlyTab" role="tab" data-toggle="tab" href="#Monthly">Monthly</a>')).appendTo(u),e("<li/>").html(e('<a id="msYearlyTab" role="tab" data-toggle="tab" href="#Yearly">Yearly</a>')).appendTo(u),e(u).appendTo(c);var y=e("<div/>",{"class":"tab-content"}),h=e("<div/>",{"class":"tab-pane active",id:"Minutes"}),v=e("<div/>",{style:"padding:15px"});e(v).append("Every&nbsp;"),e("<input/>",{id:"MinutesInput",type:"text",value:"1","class":"form-control",style:"width: 40px;display:inline"}).appendTo(v),e(v).append("&nbsp;minute(s)"),e(v).appendTo(h),e(h).appendTo(y);var b=e("<div/>",{"class":"tab-pane",id:"Hourly"}),m=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"HourlyRadio",checked:"checked"}).appendTo(m),e(m).append("&nbsp;Every&nbsp;"),e("<input/>",{id:"HoursInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline"}).appendTo(m),e(m).append("&nbsp;hour(s)"),e(m).appendTo(b);var x=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"2",name:"HourlyRadio"}).appendTo(x),e(x).append("&nbsp;At&nbsp;"),e(x).append('<select id="AtHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(x).append('<select id="AtMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(x).appendTo(b),e(b).appendTo(y);var T=e("<div/>",{"class":"tab-pane",id:"Daily"}),g=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"DailyRadio",checked:"checked"}).appendTo(g),e(g).append("&nbsp;Every&nbsp;"),e("<input/>",{id:"DaysInput",type:"text",value:"1","class":"form-control",style:"width: 40px;display:inline"}).appendTo(g),e(g).append("&nbsp;day(s)"),e(g).appendTo(T);var f=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"2",name:"DailyRadio"}).appendTo(f),e(f).append("&nbsp;Every week day&nbsp;"),e(f).appendTo(T),e(T).append("Start time&nbsp;"),e(T).append('<select id="DailyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(T).append('<select id="DailyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(T).appendTo(y);var k=e("<div/>",{"class":"tab-pane",id:"Weekly"}),M=e("<div/>",{style:"padding:15px"}),D=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"MON"}).appendTo(D),e(D).append("Monday");var Y=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"TUE"}).appendTo(Y),e(Y).append("Tuesday");var w=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"WED"}).appendTo(w),e(w).append("Wednesday");var H=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"THU"}).appendTo(H),e(H).append("Thursday");var I=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"FRI"}).appendTo(I),e(I).append("Friday");var O=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"SAT"}).appendTo(O),e(O).append("Saturday");var W=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"SUN"}).appendTo(W),e(W).append("Sunday"),e(M).appendTo(k),e(k).append("Start time&nbsp;"),e(k).append('<select id="WeeklyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(k).append('<select id="WeeklyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(k).appendTo(y);var N=e("<div/>",{"class":"tab-pane",id:"Monthly"}),R=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"MonthlyRadio",checked:"checked"}).appendTo(R),e(R).append("&nbsp;Day&nbsp"),e("<input/>",{id:"DayOfMOnthInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline"}).appendTo(R),e(R).append("&nbsp;of every&nbsp;"),e("<input/>",{id:"MonthInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline;"}).appendTo(R),e(R).append("&nbsp;month(s)"),e(R).appendTo(N);var E=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"2",name:"MonthlyRadio"}).appendTo(E),e(E).append("&nbsp;"),e(E).append('<select id="WeekDay" class="form-control day-order-in-month" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(E).append('<select id="DayInWeekOrder" class="form-control week-days" style="width: 100px;display:inline"></select>'),e(E).append("&nbsp;of every&nbsp;"),e("<input/>",{id:"EveryMonthInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline;"}).appendTo(E),e(E).append("&nbsp;month(s)"),e(E).appendTo(N),e(N).append("Start time&nbsp;"),e(N).append('<select id="MonthlyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(N).append('<select id="MonthlyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(N).appendTo(y);var C=e("<div/>",{"class":"tab-pane",id:"Yearly"}),S=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"YearlyRadio",checked:"checked"}).appendTo(S),e(S).append("&nbsp;Every&nbsp"),e(S).append('<select id="MonthsOfYear" class="form-control months" style="width: 150px;display:inline"></select>'),e(S).append("&nbsp;in day&nbsp;"),e("<input/>",{id:"YearInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline;"}).appendTo(S),e(S).appendTo(C);var A=e("<div/>",{style:"padding:15px"});return e("<input/>",{type:"radio",value:"2",name:"YearlyRadio"}).appendTo(A),e(A).append("&nbsp;The&nbsp;"),e(A).append('<select id="DayOrderInYear" class="form-control day-order-in-month" style="width: 90px;display:inline;margin-right:5px;"></select>'),e(A).append('<select id="DayWeekForYear" class="form-control week-days" style="width: 100px;display:inline"></select>'),e(A).append("&nbsp;of&nbsp;"),e(A).append('<select id="MonthsOfYear2" class="form-control months" style="width: 110px;display:inline"></select>'),e(A).appendTo(C),e(C).append("Start time&nbsp;"),e(C).append('<select id="YearlyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(C).append('<select id="YearlyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(C).appendTo(y),e(y).appendTo(c),e(this).html(c),l(),i(),p(),n(),e("#CronGenMainDiv select,input").change(function(e){r()}),e("#CronGenMainDiv input").focus(function(e){r()}),""!==a.setCron?d(a.activeTab,a.setCron):r(),a}}(jQuery);